{"componentChunkName":"component---src-templates-blog-post-js","path":"/state-of-emergency/","result":{"data":{"site":{"siteMetadata":{"title":"Note on software"}},"markdownRemark":{"id":"b52a0027-b58f-57ee-8213-3508eff8f5a6","excerpt":"Alert! Your state might already be infected! What if I told you that while you are walking around all happy and content in these times of peace and great…","html":"<h1>Alert! Your state might already be infected!</h1>\n<p>What if I told you that while you are walking around all happy and content in these times of peace and great economic prosperity, your application state might be modeled wrong!</p>\n<p>What if I told you I could help you with that, all while introducing another mnemonic to the world ?!?\nFeel intrigued? Then keep reading!</p>\n<h1>What is state anyway?</h1>\n<p>State is a description of how things are right now.</p>\n<p>Examples:</p>\n<ul>\n<li>The oven is on.</li>\n<li>The traffic light is broken.</li>\n<li>The theme is set to dark-mode</li>\n</ul>\n<h1>The four levels of state</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a32d18ef09effae86fc8baeff6849102/cd536/the_four_states.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.24050632911392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVQY0zWR28qCQBSFe/9X6L6r3iCMIAoKRCs1gg6mDuroeMqZcU7un5L/u9o3i71Y3wwAGGPjDwBQSlFK5Q+ttTFGKSWl5JyP49h1HWOs7/u2bbXWMwBYrVa2bVNKAaDrOsuybNsOw7AsS6217/ue512vV2NMkiSbzWa73bquK6X8hgkh6/Xa932MMQA0TXM4HKIogh8IId/367oGAGPM6XS6XC593wPAzBhDKa3rGiE0DIMQwnVdx3GiKGqapm3b5/NZ//N6vYIgKIpiqjmjlBJC9vu953lhGC6Xy/l8fjwei6JI0zSO4/v9XhRFEAQIoTiOb7cbIaSqqmEYZhjj3W63WCzyPFdKhWHoOM75fM6yLI7jJEkwxlrrtm0551mWiR95nnPOv5+jKCrLchxHhNDj8bAs6/1+E0IYY0opjHFVVU3TjOPIGEvTtCzLz+fzrQ0AnHNKad/3WutJiZRSCDENprUWQkwiJ5dSyun+A+mfuHFdZQscAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"The four level of state\"\n        title=\"The four level of state\"\n        src=\"/static/a32d18ef09effae86fc8baeff6849102/f058b/the_four_states.png\"\n        srcset=\"/static/a32d18ef09effae86fc8baeff6849102/c26ae/the_four_states.png 158w,\n/static/a32d18ef09effae86fc8baeff6849102/6bdcf/the_four_states.png 315w,\n/static/a32d18ef09effae86fc8baeff6849102/f058b/the_four_states.png 630w,\n/static/a32d18ef09effae86fc8baeff6849102/40601/the_four_states.png 945w,\n/static/a32d18ef09effae86fc8baeff6849102/cd536/the_four_states.png 1114w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>State-space differs depending on which of these levels we are talking about.\nLet’s dive in to see what they represent.</p>\n<h2>The real world</h2>\n<p>The real world is messy and full of more details than we can even conceive.\nImagine writing software for a washing machine.\nThe most apparent thing about it is that it has one or more knobs conveying different states.</p>\n<p>But it has more than that; it has a color, air inside, and hinges, screws, all in different shapes, sizes, and conditions. The list goes on.</p>\n<h2>The abstract state</h2>\n<blockquote>\n<p><strong>The abstract state is a mapping from reality to a much simpler subset that still is useful to model what we are after.</strong></p>\n</blockquote>\n<p>When it comes to data modeling, it’s for us, the programmers, to select such a subset.\nContinuing with the washing machine, maybe the only interesting states for our purposes are:</p>\n<ul>\n<li>is it On or Off?</li>\n<li>is it running?</li>\n<li>What program is it set to?</li>\n</ul>\n<p>And we actively choose not to model</p>\n<ul>\n<li>Electricity consumption</li>\n<li>More descriptive states like Stopped, Ready, Empty, Full,  Error.</li>\n</ul>\n<p><strong>So what is an abstraction ?</strong></p>\n<p>An abstraction is a mapping from a complex set to a simpler one, where operations and results in the abstract domain still tell us something relevant about the original set.\nThat is precisely what we did above with our mapping from the real world to the abstract state.</p>\n<p>I first came across this idea of thinking of the abstraction mapping instead of “the abstraction” by reading Jimmy Koppel’s article <a href=\"https://www.pathsensitive.com/2022/03/abstraction-not-what-you-think-it-is.html\">Abstraction: not what you think it is</a> .</p>\n<p>I have been asked a few times about “what is a good abstraction?” so here is my current <a href=\"https://matt.might.net/articles/intro-static-analysis/\">favorite example</a>.</p>\n<p>Imagine an mapping (abstraction mapping) from the integer\n<code class=\"language-text\">... -3, -2, -1, 0, 1, 2, 3, ...</code> to the set <code class=\"language-text\">{-, 0, +}</code>. This is the abstract domain.\nNegatives to <code class=\"language-text\">{-}</code>, positives to <code class=\"language-text\">{+}</code> and 0 to <code class=\"language-text\">{0}</code>.</p>\n<p>We can also map the <code class=\"language-text\">+</code> and <code class=\"language-text\">*</code> operators to versions operating on the abstract domain</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span>    <span class=\"token comment\">// A positive number plus a positive number is a positive number</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">-</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token punctuation\">}</span> \n<span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">-</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">-</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token operator\">+</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span>\netc<span class=\"token operator\">...</span></code></pre></div>\n<p>Why do such a thing?</p>\n<p>To perform a very simple static analysis of signs without having to evaluate a complete mathematical expression.</p>\n<p>For example, we don’t have to evaluate  <code class=\"language-text\">4 * -3</code> to know that the answer is negative.</p>\n<p>A short, sweet, and useful abstraction mapping in my opinion.</p>\n<h2>The concrete state</h2>\n<blockquote>\n<p><strong>The concrete state is the data types.</strong></p>\n</blockquote>\n<p>The goal is to as close as possible have a one-to-one mapping between\nthe abstract and the concrete state.</p>\n<p>This to only allow states that should exist nothing more, nothing less.</p>\n<p>Example</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Purposly a model with a lot of bad states</span>\n<span class=\"token comment\">// Off and running ?</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">State</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\trunning <span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n\tisOn<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n\ttemperature<span class=\"token operator\">:</span> Celsius\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>The interpretation of the concrete state</h2>\n<blockquote>\n<p><strong>The interpretation of the concrete state is the code</strong> <strong>using the concrete state to produce your program.</strong></p>\n</blockquote>\n<p>Imagine you have a concrete state that can represent states that should not be allowed.\nThen the solution you should <strong>always</strong> try first is to make your concrete state stricter.\nThis is because if there is no way for your concrete state to represent illegal states, then the code using that concrete state also cannot represent those states.</p>\n<p>While this is always the preferred solution, there are reasons to not follow this.</p>\n<ul>\n<li>It might be very hard to capture the details of the abstract state in your concrete state, so you will have to resort to enforcing correctness in the code.\nExample: Abstract state says that a list can only be of even length.\nMost languages will not be able to express such a thing in a reasonable way in the data type.</li>\n<li>A totally correct concrete state is not worth the performance impact.</li>\n<li>A totally correct concrete state makes the code much harder to work for not enough gain in code correctness.</li>\n</ul>\n<p>In all of these scenarios, it’s an active choice to have an incorrect concrete state. This decision must be documented and well known. Code can/will change, and the compiler will not save you here.</p>\n<p>If you have not made an active choice, then make sure your concrete state is correct.</p>\n<p>This part touches on a much deeper topic of thinking about the logical level of your code. To learn more about that, attend the next cohort of <a href=\"https://jameskoppelcoaching.com/advanced-software-design-web-course/\">the advanced software design course</a> (one starts very soon!). For a primer read Jimmy’s article <a href=\"https://www.pathsensitive.com/2018/01/the-three-levels-of-software-why-code.html\">the three level of software</a>.</p>\n<h2>The goals of data modeling ?</h2>\n<p>Make your mappings as close as possible to one-to-one between abstract and concrete and concrete and interpreted.</p>\n<p><strong>Now on to the bugs!</strong></p>\n<h1>The four ways your state can be wrong!</h1>\n<p>Now it’s time to talk about how to spot and how to fix faulty states.\nWe will only look at the mapping between the <code class=\"language-text\">abstract state</code> and the <code class=\"language-text\">concrete state</code>. This is because any issues avoided or not avoided here will propagate onward.</p>\n<p>There are four ways for the concrete state to be incorrect. I.e., not in a one-to-one mapping with the abstract state.\n(The name of each incorrect mapping refers to the <code class=\"language-text\">concrete state.</code>)</p>\n<p>// OR\nThere are four incorrect mappings between the abstract state and the concrete state.\nThe name of each incorrect mapping refers to the <code class=\"language-text\">concrete state.</code>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7c01a65b24c9be703a304a968e43a4b4/024d6/the_quadrant.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.35443037974683%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8UlEQVQoz4WSza6qMBSFz/u/jTkx0YExOvAnKkw0amwbEaGU2tICYilCb6DncM2d3DXcu193u9b+MsZkWXY4HBhjEEJCiDGmaRrzobquj8cjhDCKos/6l9YaQjifzyeTyWAwGI/HUsrn89ljnHNK6WKxGI1Gq9WKcx7H8Q+cJAnnXGudJElRFMYYpRSl1LaVUvYtxhhCSNEpiqK6rltYdCKEIIQghI/Ho2maJEks8Hq9OOdSSozx7XZjnfI8L8uyhTnnCCHOedJJCJGmaQ+XZen7PoQwTVNKKSEEYyylzLLsZ/JsNnNdFyEEADidTggh27PO3e/33W4HALherwAAa5vWuoXN//SP85+VFoYQxnHMOVdKCSH6N9tDaZru93uMcRiGdrL1tWmaNirHcabT6XA4nM/n39/fy+Xy/X73sJRyvV47jrPdbheLheu6hBDbaqPCGGdZRikVQthR/arUdR1F0fP5zPMcAMAYi6KIMSalbGF7FABwPp+Px+Pj8ajr2t5ir6eUaq1933dd1wZWFMVft2+32+Vy8TwvCALOeVVV/berqgqCwK4UYyyOY4yxECLP8xbOsmy9XtuowjC8dErTtPcsDMPNZnM+n4Mg8DwPIYQxVkq1cNM05a9er5dSqizLz3iqqtKdbEspVVWVjeoPIp8Obr2S4zMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"the quadrant\"\n        title=\"the quadrant\"\n        src=\"/static/7c01a65b24c9be703a304a968e43a4b4/f058b/the_quadrant.png\"\n        srcset=\"/static/7c01a65b24c9be703a304a968e43a4b4/c26ae/the_quadrant.png 158w,\n/static/7c01a65b24c9be703a304a968e43a4b4/6bdcf/the_quadrant.png 315w,\n/static/7c01a65b24c9be703a304a968e43a4b4/f058b/the_quadrant.png 630w,\n/static/7c01a65b24c9be703a304a968e43a4b4/40601/the_quadrant.png 945w,\n/static/7c01a65b24c9be703a304a968e43a4b4/024d6/the_quadrant.png 961w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Missing</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 456px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/eb55407a12b7a3028766d9046b05a91b/7f664/missing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.51898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQoz23STauqQBgH8PNt+wpt2rdt06pti6Kigln0SilCIqNmadoEJrkwCBGvmqOOcznNwTjd+1/IMMzPx+dxvugrZVlSSpMkGQ6HgiDkeY4x9n3fcZwoiu73e5Ik9J98Mcmw53n1er3dbs9mMwBAr9cbj8e1Wq3RaAAAKKWEkE9MKc2yjFJ6u91kWZ5Op/1+fzKZrNdrnucXi0Wn0wEAEELCMEyShFX6wa7rQggPh4OqqoqiGIZhWRZCaLVanU4nhBDP8xBC0zQty1IUBUL4xoqiPB6PqvMqu93uY4edUVWVfek3VlWV4SzLgiCozsmyTAgpiiLLsqIo2GgIIcfj8Y1Pp5PneWzazWaT47jglc1mk6bpR1lKqWmabPjfWNd1hsuyTNPUdV1JklRVHQwGiqJIkgQAsG27mjZC6I0hhFXPGOOqT13X8zwPw3C9XiOE/o/3+z3DcRz3ej22JoRomla9iC3Y83K5/MJRFBmG4ft+mqYVMAyDEHK9XouiYDus8i8siiLGuNvttlotAICu66Zpns9ny7LyPN9ut5qmGYaxWq3m87nv+wihKIp+sOd5PM9zHDcajZbLJcdxgiBACDVNcxxH13VRFDVNO7xiWZZt2xjj9/UkhFS/sSgKjHGapnEcB0EQhuGfV57P58dF+gvFxvgnxISAiwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"missing\"\n        title=\"missing\"\n        src=\"/static/eb55407a12b7a3028766d9046b05a91b/7f664/missing.png\"\n        srcset=\"/static/eb55407a12b7a3028766d9046b05a91b/c26ae/missing.png 158w,\n/static/eb55407a12b7a3028766d9046b05a91b/6bdcf/missing.png 315w,\n/static/eb55407a12b7a3028766d9046b05a91b/7f664/missing.png 456w\"\n        sizes=\"(max-width: 456px) 100vw, 456px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>We have <strong>Missing</strong> states when there exists abstract states that cannot be expressed by the concrete state.</p>\n</blockquote>\n<h3>How to spot?</h3>\n<p>Requirements that should be straightforward but are not, and it’s due to the fact that our our concrete-state is not expressive enough to include that case.</p>\n<p>The most common example is probably not having an <code class=\"language-text\">Error</code> state when one should.</p>\n<h3>How to fix ?</h3>\n<blockquote>\n<p><strong>Add unique concrete states</strong></p>\n</blockquote>\n<p>Example</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// ### before ###</span>\n\n<span class=\"token comment\">// function can blow up</span>\n<span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">A</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>li<span class=\"token operator\">:</span> <span class=\"token constant\">A</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> li<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// ### After ###</span>\n\n<span class=\"token comment\">// Function with extra concrete state</span>\n<span class=\"token keyword\">const</span> head <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">A</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>li<span class=\"token operator\">:</span> <span class=\"token constant\">A</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> li<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token function\">just</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">nothing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Function with stricter abstract state input</span>\n<span class=\"token comment\">// Now the bug cannot exist so we don't need it in our state</span>\n<span class=\"token keyword\">const</span> <span class=\"token generic-function\"><span class=\"token function\">head</span> <span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">A</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>li<span class=\"token operator\">:</span> NonEmptyArray<span class=\"token operator\">&lt;</span><span class=\"token constant\">A</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> li<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2>Illegal</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 596px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f12e8e7075ba87ef5aab817b73a0db92/699b7/Illegal.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.21518987341771%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVQoz5WTy6+iMBTG75/v/q6MMTExcWuiCzQxJi4kgBICCKLIQxSlgBrxUSjS3oyd8THjZn6Lkz7O13P6Nf0if8AYE0LiOO52u0mSIIQeW0VRkE98PWQUCCHP861Wq1QqdTodhmHG47Gqqq9pj8FvMULofD5DCI/HY7VaZRjm+/u73W5XKpVer2dZ1uVyOd7JsuytsmEY0+nUMIz5fK5p2mAw0HVdkiRRFGezmWVZ8/l8Op3O7oiiCCF8ilmWvd1uj5ZutxvGWJZlx3EIIWma0j5pNAwjDEM6/SUejUbUkqIo8B1CiO/7lmXRJIwxhJDm2La92+0+iF+9VRSFZdk4jlerlaIozWaT+u/7/na7fYoFQcjznBCyWCzq9bokSaqqchwnCEIURQAAhFCSJPTQMAx933+KOY6jd47jWBRFehAAYLVa0V5OpxMAgI7DMNxsNm/if9sGAHieR1ds2+73+x8qY4wlSbper41GY7fb7ff7PM+LovA8LwgCAIBpmlmWxXEcBMF+vwcAvFXmeT7P83K5XKvVut2upmm6rquqejgcoigaDoe6rlP/XNcNgmC9Xj/FsixzHKdpmizLmqYpikLjZDIxTVNVVcMwTNN0HMd13eVy+fZURVGkaYoQyvOcxgcQwizLEEJZlqV3Xt35+2P8Fz80Bz5ZbbwQCwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Illegal\"\n        title=\"Illegal\"\n        src=\"/static/f12e8e7075ba87ef5aab817b73a0db92/699b7/Illegal.png\"\n        srcset=\"/static/f12e8e7075ba87ef5aab817b73a0db92/c26ae/Illegal.png 158w,\n/static/f12e8e7075ba87ef5aab817b73a0db92/6bdcf/Illegal.png 315w,\n/static/f12e8e7075ba87ef5aab817b73a0db92/699b7/Illegal.png 596w\"\n        sizes=\"(max-width: 596px) 100vw, 596px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p><strong>illegal</strong> states are states which has no mapping to an abstract state</p>\n</blockquote>\n<p>You might have heard illegal states being talked about before, usually expressed as “Make Illegal States Unrepresentable”.</p>\n<p>There is a strong connection between <strong>Illegal</strong> states and <strong>Redundant</strong> states because sometimes it’s just a matter of perspective.</p>\n<p><em><strong>Are extra keys in a map just redundant states or illegal states?</strong></em></p>\n<h3>How to spot?</h3>\n<p>Say you are using some program, and there and in the settings, you see the following text <em>“only applies if extraFx is activated”</em>.</p>\n<p>If you use that setting anyway without activating <code class=\"language-text\">extraFx</code> and you get undefined behavior, then the application contains <strong>illegal</strong> states. If the setting is just ignored when <code class=\"language-text\">extraFx</code> is not activated then you have <strong>redundant</strong> states.</p>\n<h3>How to fix?</h3>\n<blockquote>\n<p><strong>Remove concrete states</strong></p>\n</blockquote>\n<p>Make illegal states unrepresentable by removing possible states from your concrete state.\nSee the example in the redundant section.</p>\n<p>Here is an example of illegal states in the <a href=\"https://github.com/bitcoin/bitcoin/blob/2f71a1ea35667b3873197201531e7ae198ec5bf4/src/coins.h#L112-L126\">bitcoin codebase</a>. These are avoided by careful coding in the interpretation of the concrete state. Can you think of ways to make the state stricter, and make bugs impossible?</p>\n<h2>Redundant</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 433px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3b1bf90c55c359e667c62f47703a2157/55fc0/redundant.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.48101265822784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZklEQVQoz22TX0+rMBjG/ax+AT+A90YTNcbExBsvvN2tmca4DOOYSzBDRgcstPwpOJYtaAVWAQftietkJyfnd9W34en78LztDl9TVdXj42OSJKLM85wxJtZ1Xadpyv/HTrPa3d2FEMZxTAi5u7uLoqgsSwDA29ubLMsY4ziOwzAcDoecc3H0RswYOzg4aLVax8fHt7e3V1dX5+fnp6enFxcXh4eHR0dHe3t7+/v7rVbr+vpa2NmK67omhBiGYZpmFEWz2SzLMgghIcT3fdu2sywriiJbU9f1trPjOK+vr6PRyPwFrOn1esPhEABgWZamaeqa0WikKIqu6xuxLMviJPaLcDUYDCilIs5/onp+ft6I+/1+k20TgXA0m82aUlVVz/NE+fLyshErivL19dXs6rrueZ7jOPf39+12ezwea5pm2/bZ2ZkkScKIpmkbsaqqYpKMMWPNzc1Nr9frdruDwaAsS0qp+J3G2ng83trO87yxxzkvyzLLsm632+l0LMuCEC4WC8uy/u6xDUwkxBirqqppEoYhxphz/vn5qev65eUlQkh8NplMvr+/N+KqqkQ2fwcWBMF0Oq3rWlzbZiKcc4RQkiQ7YiSc85OTk3a7LW7ifD6fTqeu68ZxbJqmoiiu6/q+3+/3ZVlO0xQhVBTFj1iSpLIsJUnqdDoPDw+GYQAAXNfFGC8WC0qpZVkIofl8DiHEGOd5DgBYrVY/Yt/3n56eJpMJhDCKovAX27YNw3Acx/O8IAgwxkEQIITEDmNs+6qKoqCULpdLSmmapkmSLJdLQsj7+3scxx8fH4SQNE1Xq1XzJP8A3y1cX1SVl8wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"redundant\"\n        title=\"redundant\"\n        src=\"/static/3b1bf90c55c359e667c62f47703a2157/55fc0/redundant.png\"\n        srcset=\"/static/3b1bf90c55c359e667c62f47703a2157/c26ae/redundant.png 158w,\n/static/3b1bf90c55c359e667c62f47703a2157/6bdcf/redundant.png 315w,\n/static/3b1bf90c55c359e667c62f47703a2157/55fc0/redundant.png 433w\"\n        sizes=\"(max-width: 433px) 100vw, 433px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>We have <strong>Redundant</strong> states when there is more than one way to represent one abstract state.</p>\n</blockquote>\n<p>As mentioned before, <strong>Redundant</strong> states have a strong connection to <strong>Illegal</strong> states.\nIt’s easy to go from having <strong>Redundant</strong> states to having <strong>Illegal</strong> states; all that one has to do is interpret one of the extra redundant states the wrong way.</p>\n<p>A easy way to add a <strong>Redundant</strong> state is adding a extra field to a map/object/record.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Person</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n     name        <span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n   <span class=\"token punctuation\">,</span> age         <span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n   <span class=\"token punctuation\">,</span> extraField <span class=\"token operator\">:</span> <span class=\"token builtin\">any</span>\n<span class=\"token punctuation\">}</span>\n\nor\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Mood</span> <span class=\"token operator\">=</span> Good <span class=\"token operator\">|</span> Bad <span class=\"token operator\">|</span> AlsoGood</code></pre></div>\n<p>The first kind is not as bad as the second because extra fields in records create a subtype of the previous type, so in many cases the code will function the same as long as nothing discriminates upon it. There however still are issues like for example a equality check that fails because of the value of a redundant field.</p>\n<p>The second kind leads to real pain in scenarios like this: you can flip an image either by writing <code class=\"language-text\">new FlippedDrawable(image)</code> or <code class=\"language-text\">image.setFlipped(true)</code>.\nThen, to check if an image is flipped, you need to look at both every time.</p>\n<h3>How to spot?</h3>\n<p>Continuing with settings menu example from illegal.\nAnytime an application has options that only apply in specific scenarios, but they are always possible to select, there are either illegal or redundant states.</p>\n<h3>How to fix?</h3>\n<blockquote>\n<p><strong>Remove concrete states</strong></p>\n</blockquote>\n<p><strong>Example</strong>\n<code class=\"language-text\">hyperBlur</code> and <code class=\"language-text\">extraRainEffects</code> are options under <code class=\"language-text\">extraFx</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token punctuation\">{</span>\n  extraFx<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n  hyperBlur<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n  extraRainEffects<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">/////////////////////////</span>\n<span class=\"token comment\">// (extraFx, hyperBlur, extraRainEffects)</span>\n<span class=\"token comment\">/////////////////////////</span>\n\n<span class=\"token comment\">/////////////////////////</span>\n<span class=\"token comment\">// The states we have: 8</span>\n<span class=\"token comment\">/////////////////////////</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\">////////////////////</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">//  These all map to the same abstract state</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">//  </span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">///////////////////</span>\n\n<span class=\"token comment\">/////////////////////////</span>\n<span class=\"token comment\">// the states we want: 5</span>\n<span class=\"token comment\">/////////////////////////</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// &lt;-- Potentially also overloaded depends on abstract state</span>\n<span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//     i.e does `extraFx` has some effect even without options</span>\n\n<span class=\"token comment\">/////////////////////////</span>\n<span class=\"token comment\">// Our new concrete state</span>\n<span class=\"token comment\">/////////////////////////</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ExtraFxOptions</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n   hyperBlur<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n   extraRainEffects<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Settings</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n extraFx<span class=\"token operator\">:</span> Off <span class=\"token operator\">|</span> ExtraFxOptions\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/////////////////////////</span>\n<span class=\"token comment\">// Even stricter concrete state without the (true,false,false) state</span>\n<span class=\"token comment\">/////////////////////////</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Settings</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n extraFx<span class=\"token operator\">:</span> Off <span class=\"token operator\">|</span> ExtraFx<span class=\"token operator\">&lt;</span>NonEmptyList<span class=\"token operator\">&lt;</span>Options<span class=\"token operator\">>></span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h2>Overloaded</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22d0a18d601b1d28cef814372f5b5794/48c0e/overloaded.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.21518987341771%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACP0lEQVQoz12TwY/xQBjG/cN7cnWVbPbkZBMHbDaCPdiTxcpWlhC2barGMK1uGiRESVFD0E7fL2t8Xd/3HNqZzvubeZ7OTAgAfN8HgHK5nM/nTdMEAMYYAGy3W9d14SLP8/iTUgp/FeKv1WolCMJ+vy8UCqvVShRFQkg6nSaEmKbpOM7r62ulUpFl+f39PZjrClNKS6VSrVbLZDKJROLu7u7x8fHt7S2ZTEYikXg8Ho1G7+/vHx4eBEEIrP3As9kMY1ytVp+fn1VVlSRJEIR2u/319SXLsqqqiqIghPr9Psa43+93Op3z+XyFJUlar9c8vOd55/OZMbZer5vNpuu6x+PRdV3f9xlj3K2iKJvN5hfmHW4mkKIoh8Ph9gsvQAg5jnOFZVnmK4/H41wuZ1nWbrcDgG63u91uuSOO8X0ZDoe84Arbtg0AGONwOCyKIg+czWYxxrZtB444PBqN+KQ/sCiKQeZbexjjdrtdr9dfXl7i8fjpdOKj8/l8sVj8D1NKn56eMMaEEEmScrmcqqqWZU0mE0IIuwgAdrudYRj//DDP8/b7fSqV0jRtPB4DgK7rPFvgKDgUuq7/wp7nFYvFj4+P5XJJKfV9n1KqqurpdEIIaZrmOM5isTAMYzqdbjab7+/vK9xoNCzLQgjFYrF8Pv/5+dlqtRBCg8GAMWaaZqvV6l0kSZKu68vl8ndl27ZFUZRlGSFECOHHiDe63W6v1xtcRAgxDEPTtPl8zq9HKEjCN5MxxhMGOf0bBaP8Vv0BCQYh/VNDhNkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"overloaded\"\n        title=\"overloaded\"\n        src=\"/static/22d0a18d601b1d28cef814372f5b5794/48c0e/overloaded.png\"\n        srcset=\"/static/22d0a18d601b1d28cef814372f5b5794/c26ae/overloaded.png 158w,\n/static/22d0a18d601b1d28cef814372f5b5794/6bdcf/overloaded.png 315w,\n/static/22d0a18d601b1d28cef814372f5b5794/48c0e/overloaded.png 440w\"\n        sizes=\"(max-width: 440px) 100vw, 440px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>A state is <strong>Overloaded</strong> if we have one concrete state representing two abstract states.</p>\n</blockquote>\n<p>This is probably the most common bug I run into when using software.</p>\n<h3>How to spot?</h3>\n<p>Have you ever used a piece of software, and the following occurs?</p>\n<ol>\n<li>There is text saying “no messages | likes | etc…”</li>\n<li>A second later, the data does pop up.</li>\n</ol>\n<p>If you have, then you have observed the effect of overloading.</p>\n<p>Both Slack and Twitter have had this bug.\n<a href=\"http://blog.jenkster.com/2016/06/how-elm-slays-a-ui-antipattern.html\">How elm slays a common UI Antipattern</a></p>\n<h3>How to fix?</h3>\n<blockquote>\n<p><strong>Add unique concrete states</strong></p>\n</blockquote>\n<p>Say you have a model like this</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">State</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  isLoading<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">,</span>\n  data<span class=\"token operator\">:</span> List<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then there is no way to differentiate these two abstract states</p>\n<ul>\n<li>Empty list because nothing was returned from the backend</li>\n<li>Empty list because we have not asked for it yet</li>\n</ul>\n<p>If we ask ourselves what states should exist for data fetched from a backend, it becomes clear that these four states are a better abstract description of what is going on.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">state</span> <span class=\"token operator\">=</span> NotAsked <span class=\"token operator\">|</span> Loading <span class=\"token operator\">|</span> Success<span class=\"token operator\">&lt;</span>List<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">>></span> <span class=\"token operator\">|</span> Failure<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></code></pre></div>\n<p>If we instead use this as our concrete state there would be a distinction between <code class=\"language-text\">NotAsked</code> and <code class=\"language-text\">Success&lt;List&lt;number>></code>, which there wasn’t before.</p>\n<p>Depending on our abstract state requirements, we can take this further or be happy with this.</p>\n<p><em>How would you change the model to allow for pagination while keeping the current data you already have?</em></p>\n<h2>I was promised a mnemonic! Where is it?</h2>\n<p>I will give you two for the price of one!</p>\n<blockquote>\n<p><strong>When designing your data model avoid MIRO concrete states</strong></p>\n</blockquote>\n<p>If you don’t like avoiding the painter <a href=\"https://www.wikiwand.com/en/Joan_Mir%C3%B3\">MIRO</a> spilling paint all over your code, then change <strong>Redundant</strong> to <strong>Superfluous</strong>, and you got <strong>MISO</strong> Soup! Don’t drop <strong>MISO</strong> in your code! <em>(For a quick demonstration of the effects, pour some MISO soup into your computer and see what happens!)</em>.</p>\n<h3>M -> I ->  R -> O</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a07db147b53822aad653434b8036185e/0955e/MIRO.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.0506329113924%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqUlEQVQoz31SW1PaQBTm9/oH+uBLpy8+tc50+lC1U8fL4HTQUsW7XBTpKApWAYEQINlkyZJAyH0hCdntJFH71u9hd8/O+eac830nQSOMx2PHcTzPm06nhBBKKaGEUBLer0AIOY7jum4QBPFPIn5ls9nDw0zxsri9lVTkSUgm/2jTqWsY1vnZeSqVur4uybKsaVoQBAnbtgEA2kQbTTRWZHtSrQWu79uZ1iA3NJ4Mg0ewyYE6dg3se4AXLMvEGCuKYtt2wjRNXdeRNKjeHiQ33x3+WqwU1m6P128y3zu5fT6f/XOQujlaL2Q+5k++siyr63rMdBwnIhvGCKFh8xm0WNDjPc+bzTyMZ3HPpmmZhoUtN3fxqXS0RSmV5aFt2xjjBMb47u7utlyeGAYvABGKEIoISY5t02hs27IYpv302GDEx4udZShIvX6P5/nZbJaYz+cQQgAAQkiW5UGEWI83wVRVlZCkDMfHP5e64HGi6pOJGgpGKQ0i0P+CkDChcZuUB/W3MCTzPF+pVLrdLsMwAIBqtWqaZuxWbJiiKJeFwjPDZHeTezufb+7ueY4Lyb7vsyxbr9UuC5el61Ihn89lc/1+z/c9QoOAzCklQ2XYqNc4ARb2Uqf7q6KEAM+/qK2q6lhVsWUKIhc3admOZdlvxYdI8Umgqdru2vsueIAQTSKEZEPXmW4vvfRhdXHhIP2lnN+o5rfvi0mmf9QYpBswXbrfrJY3tr4t7J0tD6QhhNB1XU3Twg2DEDaa7Vx6pXiS5GALwIcOU2rVcp3ySa2w2yymT3+s/C4ldSzYNkaSNBqNLMsKK3ueV6/Xr66uulwPCKDfByzLiSLyfP9tw4EwqFRrrWZHAKDT6bTbbY7jTNMM1Z7P51Fe5FnoAXmZNYzm0RkbSWJHySv+AmPAI3anxISFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MIRO\"\n        title=\"MIRO\"\n        src=\"/static/a07db147b53822aad653434b8036185e/f058b/MIRO.png\"\n        srcset=\"/static/a07db147b53822aad653434b8036185e/c26ae/MIRO.png 158w,\n/static/a07db147b53822aad653434b8036185e/6bdcf/MIRO.png 315w,\n/static/a07db147b53822aad653434b8036185e/f058b/MIRO.png 630w,\n/static/a07db147b53822aad653434b8036185e/0955e/MIRO.png 901w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\nIf you are like me and like to think deeply about software I can recommend taking the <em>Advanced software design course</em>. That is where I learned the deeper foundations that underlay all software. And that led me to the ideas that underlay this article.\n<strong>The next batch of the Advanced Software Design course starts on the 23 of June.\n<a href=\"https://jameskoppelcoaching.com/advanced-software-design-web-course/\">https://jameskoppelcoaching.com/advanced-software-design-web-course/</a></strong></p>\n<h2>Introducing the State Fixagram™!</h2>\n<p>I will leave you with this easy to follow <strong>Fixagram™</strong>.\nNext time you find yourself with an invalid state, don’t fret! Just follow the <strong>Fixagram™</strong>, and you will be alright.\n<strong>No need for a state of emergency!</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cefb1544258ce48ee5496739b0bebb2a/c391c/fixagram.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 125.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAADjklEQVQ4y12UW3OqShCF/f//xdp5Sl5SMamIsRTlphF0AEEYQBxuM8NNcE7h7OPJyfdkSS+6e/XS0fF4nEwm8/l8Nps9Pz/P5/PVaqWqqizLb29voiju93tFUSRJWq1Wy+VyOp1OJpPxeBzH8WixWIRhyBjDGC+Xy9PplCRJHMeMMVEUx+OxKIpRFEEIXdeNoojdsW3bsqyRpmlBEDDGiqJQFGU2mwmC8PHxUZbl+Xx+fX398+fP09MTn0KWZQDA5XIRRRFCOFJV9eXlRRCE2Ww2n8+lO/IdTdMAAJ7nhWF4vON5nuM4vu+/v7+naTqSJAkAcLvd+Dz8Q1EUfAXHcbbb7fV6Zf/CC2zbxhgP4qIo2A/6vj+fzwgh27Zd10UIxXHcdd3tTt/3jDHDMLIsG8b+Je66LssySikAwDAMSikhhGsenQ+HQ57ng2EYY/Z/HMfZbDaWZUmSZJomQuiX2LKsoihG2+2WEPJLnCSJZVlpmiKEgiBACP3aGQAwdN5sNlzMv8UYx3EcBIEkSbwaAKBpmmmal8uFENJ13X+GPTpzcZIkjuOoqkop5eYxxtbrtWVZyR3uvOd5w6l0Xa/rmjHWti1/ve/7aZr+3IIQYtt2GIa8kjGGEPJ9fzCMOxxFkSAIn5+f0+k0iqKqqnhdURQYY1EUZ7MZhJCbRykd4sl3I4QkSUIphRB2d7Ise5hXVRVCKMuysizTNL1er5RSwzBGsiwzxniS4zgOwzCO46ZpHvdLkiRNU/40TdM8z7uuK8tyEPPOTdNIkrTdbsMwdBzneDw+xAghRVF4pHm8GWOU0t1uN1qtVoyxqqrKO7qul2XZ9/0j7dzwOI4NwyB3qqrK8/xwOIzW6zXG2DRNeMfzPG7VQ8yp6zqKoiAIfN/3PA9CeDweBzEvpZTWdd3f4b+Bh/LhFsa4aRrukWmag2H8eqZpTqfTr68vfi0eEv4KSZIWi4WiKIIgAAD4zoNY0zRKadu2EMLT6QQA4Em6XC6/3OY5iaKIEFLX9d+/IS7mwbRtGwBQVRXvzBjLsqxt2yzLDMPgVyjLsq7rYefdbpdlWd/3+/1eVVXf9yGEYRg+Eoox1jTNdV0+muu6hJC/IUmSRJbl2+0GIfz+/t7tdrquf39/27ad5/n1em2ahi+CMSaEtG3LMyuK4ogx5vu+pmmHwyGKIoRQmqZZlp3PZ9d1DcPQdd38AZ9L13UAwD9y91k5BCe3PQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fixagram\"\n        title=\"fixagram\"\n        src=\"/static/cefb1544258ce48ee5496739b0bebb2a/f058b/fixagram.png\"\n        srcset=\"/static/cefb1544258ce48ee5496739b0bebb2a/c26ae/fixagram.png 158w,\n/static/cefb1544258ce48ee5496739b0bebb2a/6bdcf/fixagram.png 315w,\n/static/cefb1544258ce48ee5496739b0bebb2a/f058b/fixagram.png 630w,\n/static/cefb1544258ce48ee5496739b0bebb2a/c391c/fixagram.png 673w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"State of emergency! The four ways your state might be wrong","date":"June 18, 2022","description":""}},"previous":null,"next":null},"pageContext":{"id":"b52a0027-b58f-57ee-8213-3508eff8f5a6","previousPostId":null,"nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"]}